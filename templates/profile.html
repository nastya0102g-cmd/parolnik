<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <link rel="stylesheet" href="../static/css/style.css">
    <script src="../static/js/script.js" defer></script>
</head>
<body>
    <div class="container">
        <div class="card header">
            <div class="title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</div>
            <div>
                <button class="icon-btn" onclick="location.href='/search'">üîç</button>
                <button class="icon-btn" onclick="location.href='/favorites'">‚≠ê</button>
                <button class="icon-btn" onclick="location.href='/navigation'">‚Üê</button>
            </div>
        </div>

        <div class="profile-grid">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div class="card">
                <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h3>
                {% if user %}
                <p><strong>–ò–º—è:</strong> {{ user.name }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.created_at[:10] if user.created_at else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</p>
                {% endif %}

                <button class="btn" onclick="location.href='/navigation'">–í –Ω–∞–≤–∏–≥–∞—Ü–∏—é</button>
                <button class="btn secondary" onclick="location.href='/logout'">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div class="card">
                <h3>–°—Ç–∞—Ç—É—Å—ã</h3>
                <p>–û–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏–µ: <span id="ackStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                <p>–¢—Ä–µ–Ω–∞–∂—ë—Ä: <span id="trainerStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è: <span id="pwdStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            </div>
        </div>

        <!-- –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ -->
        <div class="card">
            <h3>‚≠ê –ù–µ–¥–∞–≤–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏</h3>
            {% if saved_passwords and saved_passwords|length > 0 %}
            <div style="max-height: 300px; overflow-y: auto;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #f5f5f5;">
                            <th style="padding: 10px; text-align: left;">–ü–∞—Ä–æ–ª—å</th>
                            <th style="padding: 10px; text-align: left;">–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å</th>
                            <th style="padding: 10px; text-align: left;">–î–∞—Ç–∞</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for pwd in saved_passwords %}
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 10px;">
                                <span style="font-family: monospace; background: #f9f9f9; padding: 4px 8px; border-radius: 4px;">
                                    {{ pwd.password_hash[:3] }}‚Ä¢‚Ä¢‚Ä¢{{ pwd.password_hash[-3:] if pwd.password_hash|length > 6 else '‚Ä¢‚Ä¢‚Ä¢' }}
                                </span>
                            </td>
                            <td style="padding: 10px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div class="progress-bar" style="width: 80px;">
                                        <div class="progress" style="width: {{ pwd.strength_score }}%;
                                            background: {% if pwd.strength_score >= 80 %}var(--green)
                                                       {% elif pwd.strength_score >= 60 %}#f1c40f
                                                       {% else %}var(--red){% endif %};">
                                        </div>
                                    </div>
                                    <span>{{ pwd.strength_score }}%</span>
                                </div>
                            </td>
                            <td style="padding: 10px;">
                                {{ pwd.created_at[:10] if pwd.created_at else '' }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div style="margin-top: 15px; text-align: center;">
                <button class="btn secondary" onclick="location.href='/favorites'">
                    –í—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ ({{ saved_passwords|length }})
                </button>
            </div>
            {% else %}
            <p style="text-align: center; padding: 20px; color: #666;">
                –£ –≤–∞—Å –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –ø–∞—Ä–æ–ª—å!
            </p>
            <div style="text-align: center;">
                <button class="btn" onclick="location.href='/check-password'">
                    –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å
                </button>
            </div>
            {% endif %}
        </div>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="cards-grid">
            <div class="card">
                <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <button class="btn" onclick="location.href='/check-password'">
                    –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å
                </button>
                <button class="btn secondary" onclick="location.href='/trainer'">
                    –ü—Ä–æ–π—Ç–∏ —Ç—Ä–µ–Ω–∞–∂–µ—Ä
                </button>
                <button class="btn secondary" onclick="location.href='/favorites'">
                    –ú–æ–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
                </button>
            </div>

            <div class="card">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <button class="btn secondary" id="clearProgressBtn">
                    –°–±—Ä–æ—Å–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
                </button>
                <button class="btn" onclick="location.href='/search'">
                    –ü–æ–∏—Å–∫ —Å–æ–≤–µ—Ç–æ–≤
                </button>
            </div>
        </div>

        <footer class="contacts">
            <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
            <a href="tel:+77053652869">üìû +7 (705) 365-28-69</a>
            <a href="https://instagram.com/Rosa_Mirova">üì∏ @Rosa_Mirova</a>
        </footer>
    </div>
</body>
</html>